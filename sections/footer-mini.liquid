{% schema %}
{
  "name": "Footer (Mini + Me)",
  "settings": [
    {
      "type": "header",
      "content": "Logo & Branding"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Footer Logo"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 80,
      "max": 300,
      "step": 10,
      "unit": "px",
      "label": "Logo Width",
      "default": 180
    },
    {
      "type": "header",
      "content": "Newsletter Signup"
    },
    {
      "type": "text",
      "id": "newsletter_heading",
      "label": "Newsletter Heading",
      "default": "SIGN UP AND SAVE"
    },
    {
      "type": "text",
      "id": "newsletter_button_text",
      "label": "Button Text",
      "default": "Sign Up"
    },
    {
      "type": "color",
      "id": "newsletter_button_color",
      "label": "Button Color",
      "default": "#e9427c"
    },
    {
      "type": "color",
      "id": "newsletter_button_text_color",
      "label": "Button Text Color",
      "default": "#ffffff"
    },
    {
      "type": "font_picker",
      "id": "newsletter_heading_font",
      "label": "Heading Font",
      "default": "sans-serif"
    },
    {
      "type": "range",
      "id": "newsletter_heading_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Heading Size",
      "default": 11
    },
    {
      "type": "range",
      "id": "newsletter_heading_weight",
      "min": 100,
      "max": 900,
      "step": 100,
      "label": "Heading Weight",
      "default": 700
    },
    {
      "type": "header",
      "content": "Input Fields"
    },
    {
      "type": "color",
      "id": "input_bg",
      "label": "Input Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "input_border",
      "label": "Input Border",
      "default": "#e0e0e0"
    },
    {
      "type": "color",
      "id": "input_text",
      "label": "Input Text Color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "input_placeholder",
      "label": "Input Placeholder Color",
      "default": "#999999"
    },
    {
      "type": "font_picker",
      "id": "input_font",
      "label": "Input Font",
      "default": "sans-serif"
    },
    {
      "type": "range",
      "id": "input_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Input Font Size",
      "default": 13
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "font_picker",
      "id": "column_heading_font",
      "label": "Column Heading Font",
      "default": "sans-serif"
    },
    {
      "type": "range",
      "id": "column_heading_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Column Heading Size",
      "default": 11
    },
    {
      "type": "range",
      "id": "column_heading_weight",
      "min": 100,
      "max": 900,
      "step": 100,
      "label": "Column Heading Weight",
      "default": 700
    },
    {
      "type": "font_picker",
      "id": "menu_link_font",
      "label": "Menu Link Font",
      "default": "sans-serif"
    },
    {
      "type": "range",
      "id": "menu_link_size",
      "min": 10,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Menu Link Size",
      "default": 13
    },
    {
      "type": "range",
      "id": "menu_link_weight",
      "min": 100,
      "max": 900,
      "step": 100,
      "label": "Menu Link Weight",
      "default": 400
    },
    {
      "type": "font_picker",
      "id": "copyright_font",
      "label": "Copyright Font",
      "default": "sans-serif"
    },
    {
      "type": "range",
      "id": "copyright_size",
      "min": 8,
      "max": 16,
      "step": 1,
      "unit": "px",
      "label": "Copyright Size",
      "default": 11
    },
    {
      "type": "richtext",
      "id": "newsletter_disclaimer",
      "label": "Newsletter Disclaimer",
      "default": "<p>Krumbled Foods is part of the Krumbled Group (Krumble Beauty).</p>"
    },
    {
      "type": "header",
      "content": "Footer Bottom"
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "Copyright Text",
      "default": "2024 Copyright Krumbled Foods. All rights reserved."
    },
    {
      "type": "text",
      "id": "designed_by_text",
      "label": "Designed By Text",
      "default": "Website by Delyork"
    },
    {
      "type": "url",
      "id": "designed_by_url",
      "label": "Designed By URL"
    },
    {
      "type": "header",
      "content": "Styling"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#111111"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border Color",
      "default": "#e0e0e0"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Headings Color",
      "default": "#111111"
    },
    {
      "type": "color",
      "id": "link_color",
      "label": "Links Color",
      "default": "#111111"
    },
    {
      "type": "color",
      "id": "link_hover_color",
      "label": "Links Hover Color",
      "default": "#666666"
    }
  ],
  "blocks": [
    {
      "type": "menu",
      "name": "Menu Column",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Column Heading",
          "default": "Menu"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menu"
        }
      ]
    },
    {
      "type": "social",
      "name": "Social Links",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Column Heading",
          "default": "SOCIALS"
        },
        {
          "type": "text",
          "id": "instagram_label",
          "label": "Instagram Label",
          "default": "Instagram"
        },
        {
          "type": "url",
          "id": "instagram_url",
          "label": "Instagram URL"
        },
        {
          "type": "text",
          "id": "facebook_label",
          "label": "Facebook Label",
          "default": "Facebook"
        },
        {
          "type": "url",
          "id": "facebook_url",
          "label": "Facebook URL"
        },
        {
          "type": "text",
          "id": "tiktok_label",
          "label": "TikTok Label",
          "default": "TikTok"
        },
        {
          "type": "url",
          "id": "tiktok_url",
          "label": "TikTok URL"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Footer (Mini + Me)",
      "blocks": [
        {
          "type": "menu",
          "settings": {
            "heading": "MINI + ME"
          }
        },
        {
          "type": "menu",
          "settings": {
            "heading": "SUPPORT"
          }
        },
        {
          "type": "menu",
          "settings": {
            "heading": "EXPLORE"
          }
        },
        {
          "type": "social"
        }
      ]
    }
  ]
}
{% endschema %}

<style>
{{ section.settings.newsletter_heading_font | font_face }}
{{ section.settings.input_font | font_face }}
{{ section.settings.column_heading_font | font_face }}
{{ section.settings.menu_link_font | font_face }}
{{ section.settings.copyright_font | font_face }}

.footer-mini {
  background-color: {{ section.settings.background_color }};
  color: {{ section.settings.text_color }};
  padding: 60px 0 30px;
  border-top: 1px solid {{ section.settings.border_color }};
  
  --heading-color: {{ section.settings.heading_color }};
  --link-color: {{ section.settings.link_color }};
  --link-hover-color: {{ section.settings.link_hover_color }};
  
  --news-head-font: {{ section.settings.newsletter_heading_font.family }}, {{ section.settings.newsletter_heading_font.fallback_families }};
  --news-head-size: {{ section.settings.newsletter_heading_size }}px;
  --news-head-weight: {{ section.settings.newsletter_heading_weight }};
  
  --input-font: {{ section.settings.input_font.family }}, {{ section.settings.input_font.fallback_families }};
  --input-size: {{ section.settings.input_size }}px;
  --input-bg: {{ section.settings.input_bg }};
  --input-border: {{ section.settings.input_border }};
  --input-text: {{ section.settings.input_text }};
  --input-placeholder: {{ section.settings.input_placeholder }};
  
  --col-head-font: {{ section.settings.column_heading_font.family }}, {{ section.settings.column_heading_font.fallback_families }};
  --col-head-size: {{ section.settings.column_heading_size }}px;
  --col-head-weight: {{ section.settings.column_heading_weight }};
  
  --link-font: {{ section.settings.menu_link_font.family }}, {{ section.settings.menu_link_font.fallback_families }};
  --link-size: {{ section.settings.menu_link_size }}px;
  --link-weight: {{ section.settings.menu_link_weight }};
  
  --copy-font: {{ section.settings.copyright_font.family }}, {{ section.settings.copyright_font.fallback_families }};
  --copy-size: {{ section.settings.copyright_size }}px;
}

.footer-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 40px;
}

.footer-top {
  display: grid;
  grid-template-columns: 1fr 2fr;
  gap: 80px;
  padding-bottom: 50px;
  border-bottom: 1px solid {{ section.settings.border_color }};
  margin-bottom: 30px;
}

.footer-newsletter {
  max-width: 400px;
}

.footer-logo {
  margin-bottom: 30px;
}

.footer-logo img {
  width: {{ section.settings.logo_width }}px;
  height: auto;
}

.newsletter-heading {
  font-size: var(--news-head-size);
  font-family: var(--news-head-font);
  letter-spacing: 2px;
  text-transform: uppercase;
  font-weight: var(--news-head-weight);
  margin-bottom: 20px;
  color: var(--heading-color);
}

.newsletter-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 20px;
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.newsletter-input {
  padding: 14px 18px;
  border: 1px solid var(--input-border);
  background-color: var(--input_bg);
  color: var(--input-text);
  border-radius: 4px;
  font-size: var(--input-size);
  font-family: var(--input-font);
  width: 100%;
}

.newsletter-input::placeholder {
  color: var(--input-placeholder);
}

.newsletter-input:focus {
  outline: none;
  border-color: {{ section.settings.newsletter_button_color }};
}

.phone-input-wrapper {
  display: flex;
  gap: 8px;
}

.country-code {
  padding: 14px 12px;
  border: 1px solid {{ section.settings.border_color }};
  border-radius: 4px;
  font-size: 13px;
  background: white;
  display: flex;
  align-items: center;
  gap: 5px;
  min-width: 80px;
}

.newsletter-button {
  background: {{ section.settings.newsletter_button_color }};
  color: {{ section.settings.newsletter_button_text_color }};
  border: none;
  padding: 16px;
  border-radius: 50px;
  font-size: 13px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.newsletter-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.newsletter-disclaimer {
  font-size: 11px;
  line-height: 1.6;
  color: #666;
}

.newsletter-disclaimer p {
  margin: 5px 0;
}

.footer-menus {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 40px;
}

.footer-menu-column {
  display: flex;
  flex-direction: column;
}

.footer-menu-heading {
  font-size: var(--col-head-size);
  font-family: var(--col-head-font);
  letter-spacing: 2px;
  text-transform: uppercase;
  font-weight: var(--col-head-weight);
  margin-bottom: 20px;
  color: var(--heading-color);
}

.footer-menu-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.footer-menu-link {
  color: var(--link-color);
  text-decoration: none;
  font-size: var(--link-size);
  font-family: var(--link-font);
  font-weight: var(--link-weight);
  transition: opacity 0.3s ease;
}

.footer-menu-link:hover {
  opacity: 0.8;
  color: var(--link-hover-color);
}

.footer-bottom {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 20px;
  font-size: var(--copy-size);
  font-family: var(--copy-font);
  color: {{ section.settings.text_color }};
  opacity: 0.8;
}

.footer-copyright {
  display: flex;
  gap: 30px;
}

.footer-designed-by a {
  color: #666;
  text-decoration: none;
}

.footer-designed-by a:hover {
  text-decoration: underline;
}

@media (max-width: 1024px) {
  .footer-top {
    grid-template-columns: 1fr;
    gap: 50px;
  }
  
  .footer-menus {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 768px) {
  .footer-container {
    padding: 0 20px;
  }
  
  .footer-menus {
    grid-template-columns: 1fr;
    gap: 30px;
  }
  
  .form-row {
    grid-template-columns: 1fr;
  }
  
  .footer-bottom {
    flex-direction: column;
    gap: 15px;
    text-align: center;
  }
  
  .footer-copyright {
    flex-direction: column;
    gap: 10px;
  }
}
</style>

<footer class="footer-mini">
  <div class="footer-container">
    <div class="footer-top">
      <div class="footer-newsletter">
        {% if section.settings.logo %}
          <div class="footer-logo">
            <img src="{{ section.settings.logo | image_url: width: section.settings.logo_width }}" alt="{{ shop.name }}">
          </div>
        {% endif %}
        
        {% if section.settings.newsletter_heading != blank %}
          <h3 class="newsletter-heading">{{ section.settings.newsletter_heading }}</h3>
        {% endif %}
        
        <form class="newsletter-form" action="/contact#newsletter" method="post" accept-charset="UTF-8">
          <input type="hidden" name="contact[tags]" value="newsletter">
          
          <div class="form-row">
            <input 
              type="text" 
              name="contact[first_name]" 
              class="newsletter-input" 
              placeholder="First Name"
              required
            >
            <input 
              type="text" 
              name="contact[last_name]" 
              class="newsletter-input" 
              placeholder="Last Name"
              required
            >
          </div>
          
          <input 
            type="email" 
            name="contact[email]" 
            class="newsletter-input" 
            placeholder="Email"
            required
          >
          
          <div class="phone-input-wrapper">
            <div class="country-code">
              ðŸ‡¦ðŸ‡º +61
            </div>
            <input 
              type="tel" 
              name="contact[phone]" 
              class="newsletter-input" 
              placeholder="Phone Number"
            >
          </div>
          
          <button type="submit" class="newsletter-button">
            {{ section.settings.newsletter_button_text }}
          </button>
        </form>
        
        {% if section.settings.newsletter_disclaimer != blank %}
          <div class="newsletter-disclaimer">
            {{ section.settings.newsletter_disclaimer }}
          </div>
        {% endif %}
      </div>
      
      <div class="footer-menus">
        {% for block in section.blocks %}
          {% if block.type == 'menu' %}
            <div class="footer-menu-column" {{ block.shopify_attributes }}>
              {% if block.settings.heading != blank %}
                <h4 class="footer-menu-heading">{{ block.settings.heading }}</h4>
              {% endif %}
              
              {% if block.settings.menu != blank %}
                <ul class="footer-menu-list">
                  {% for link in linklists[block.settings.menu].links %}
                    <li>
                      <a href="{{ link.url }}" class="footer-menu-link">{{ link.title }}</a>
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
            </div>
          {% elsif block.type == 'social' %}
            <div class="footer-menu-column" {{ block.shopify_attributes }}>
              {% if block.settings.heading != blank %}
                <h4 class="footer-menu-heading">{{ block.settings.heading }}</h4>
              {% endif %}
              
              <ul class="footer-menu-list">
                {% if block.settings.instagram_url != blank %}
                  <li>
                    <a href="{{ block.settings.instagram_url }}" class="footer-menu-link" target="_blank">
                      {{ block.settings.instagram_label }}
                    </a>
                  </li>
                {% endif %}
                
                {% if block.settings.facebook_url != blank %}
                  <li>
                    <a href="{{ block.settings.facebook_url }}" class="footer-menu-link" target="_blank">
                      {{ block.settings.facebook_label }}
                    </a>
                  </li>
                {% endif %}
                
                {% if block.settings.tiktok_url != blank %}
                  <li>
                    <a href="{{ block.settings.tiktok_url }}" class="footer-menu-link" target="_blank">
                      {{ block.settings.tiktok_label }}
                    </a>
                  </li>
                {% endif %}
              </ul>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    
    <div class="footer-bottom">
      <div class="footer-copyright">
        <span>{{ 'now' | date: '%Y' }} {{ section.settings.copyright_text | replace: '2024', '' }}</span>
        <span>Krumbled Foods {{ 'now' | date: '%Y' }}</span>
      </div>
      
      {% if section.settings.designed_by_text != blank %}
        <div class="footer-designed-by">
          {% if section.settings.designed_by_url != blank %}
            <a href="{{ section.settings.designed_by_url }}" target="_blank">{{ section.settings.designed_by_text }}</a>
          {% else %}
            {{ section.settings.designed_by_text }}
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>
</footer>
