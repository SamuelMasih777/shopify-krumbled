{% schema %}
{
  "name": "Contact Page",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Get In Touch"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Have a question? We'd love to hear from you. Send us a message and we'll respond as soon as possible."
    }
  ],
  "presets": [
    {
      "name": "Contact Page"
    }
  ]
}
{% endschema %}

<style>
.contact-section {
  max-width: 800px;
  margin: 60px auto;
  padding: 0 20px;
}

.contact-header {
  text-align: center;
  margin-bottom: 50px;
}

.contact-heading {
  font-size: 42px;
  font-weight: 700;
  margin-bottom: 15px;
  color: #111;
}

.contact-subheading {
  font-size: 16px;
  color: #666;
  line-height: 1.6;
  max-width: 600px;
  margin: 0 auto;
}

.contact-form {
  background: #fff;
  padding: 40px;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 20px;
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  margin-bottom: 8px;
  font-weight: 600;
  font-size: 14px;
  color: #333;
}

.form-group input,
.form-group textarea {
  width: 100%;
  padding: 12px 16px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 15px;
  font-family: inherit;
  transition: border-color 0.2s;
}

.form-group input:focus,
.form-group textarea:focus {
  outline: none;
  border-color: #e9427c;
}

.form-group textarea {
  resize: vertical;
  min-height: 150px;
}

.form-submit {
  text-align: center;
  margin-top: 30px;
}

.submit-btn {
  background: #e9427c;
  color: white;
  border: none;
  padding: 14px 40px;
  font-size: 16px;
  font-weight: 600;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.2s;
}

.submit-btn:hover {
  background: #d63a6e;
}

.submit-btn:disabled {
  background: #ccc;
  cursor: not-allowed;
}

.form-message {
  margin-top: 20px;
  padding: 15px;
  border-radius: 4px;
  text-align: center;
  display: none;
}

.form-message.success {
  background: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}

.form-message.error {
  background: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
}

@media (max-width: 768px) {
  .contact-section {
    margin: 40px auto;
  }
  
  .contact-heading {
    font-size: 32px;
  }
  
  .contact-form {
    padding: 30px 20px;
  }
  
  .form-row {
    grid-template-columns: 1fr;
    gap: 0;
  }
}
</style>

<div class="contact-section">
  <div class="contact-header">
    <h1 class="contact-heading">{{ section.settings.heading }}</h1>
    <p class="contact-subheading">{{ section.settings.subheading }}</p>
  </div>

  <form class="contact-form" id="contactForm">
    <div class="form-row">
      <div class="form-group">
        <label for="contact-name">Name *</label>
        <input type="text" id="contact-name" name="contact[name]" required>
      </div>
      <div class="form-group">
        <label for="contact-email">Email *</label>
        <input type="email" id="contact-email" name="contact[email]" required>
      </div>
    </div>

    <div class="form-group">
      <label for="contact-phone">Phone</label>
      <input type="tel" id="contact-phone" name="contact[phone]">
    </div>

    <div class="form-group">
      <label for="contact-message">Message *</label>
      <textarea id="contact-message" name="contact[body]" required></textarea>
    </div>

    <div class="form-submit">
      <button type="submit" class="submit-btn">Send Message</button>
    </div>

    <div class="form-message" id="formMessage"></div>
  </form>
</div>

<script>
(function() {
  const form = document.getElementById('contactForm');
  const messageDiv = document.getElementById('formMessage');
  const submitBtn = form.querySelector('.submit-btn');

  form.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    // Disable submit button
    submitBtn.disabled = true;
    submitBtn.textContent = 'Sending...';
    
    // Hide previous messages
    messageDiv.style.display = 'none';
    messageDiv.className = 'form-message';
    
    // Get form data
    const formData = new FormData(form);
    
    try {
      const response = await fetch('/contact', {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      });
      
      if (response.ok) {
        // Success
        messageDiv.textContent = 'Thank you! Your message has been sent successfully.';
        messageDiv.classList.add('success');
        messageDiv.style.display = 'block';
        form.reset();
      } else {
        throw new Error('Form submission failed');
      }
    } catch (error) {
      // Error
      messageDiv.textContent = 'Sorry, there was an error sending your message. Please try again.';
      messageDiv.classList.add('error');
      messageDiv.style.display = 'block';
    } finally {
      // Re-enable submit button
      submitBtn.disabled = false;
      submitBtn.textContent = 'Send Message';
    }
  });
})();
</script>
